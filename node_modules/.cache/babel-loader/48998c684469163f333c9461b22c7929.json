{"ast":null,"code":"var _jsxFileName = \"/Users/saimarahman/Desktop/Development/TravelAdvisor/src/App.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './App.css';\nimport { Route, Switch } from 'react-router';\nimport HomeContainer from './HomeComponents/HomeContainer';\nimport ProfileContainer from './ProfileComponents/ProfileContainer';\nimport ShowContainer from './DestinationComponents/ShowContainer';\nimport HeaderContainer from './HeaderContainer.jsx';\nimport Footer from './Footer';\nimport NotFound from './NotFound';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      destinations: [],\n      search: \"\",\n      error: \"\"\n    };\n\n    this.createNewUser = newUser => {\n      console.log(newUser);\n      this.setState({\n        user: newUser.user,\n        token: newUser.token\n      });\n    };\n\n    this.loginUser = user => {\n      fetch('https://traveladvisor-api.herokuapp.com/login', {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(r => r.json()).then(userData => {\n        if (userData.error) {\n          this.setState({\n            error: userData.error\n          });\n        } else {\n          localStorage.setItem(\"token\", userData.token);\n          this.setState({\n            user: userData.user,\n            search: \"\"\n          });\n        }\n      });\n    };\n\n    this.updateSearchForm = newValue => {\n      this.setState(prevState => {\n        return {\n          search: newValue\n        };\n      });\n    };\n\n    this.filterSearch = () => {\n      let newArr = this.state.destinations.filter(destination => {\n        let searchValue = this.state.search.toLowerCase();\n        return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue);\n      });\n      return newArr;\n    };\n\n    this.clearSearch = emptyValue => {\n      this.setState({\n        search: emptyValue\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(`https://traveladvisor-api.herokuapp.com/destinations`).then(r => r.json()).then(destinations => {\n      this.setState({\n        destinations\n      });\n    });\n\n    if (localStorage.token) {\n      fetch(`https://traveladvisor-api.herokuapp.com/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      }).then(r => r.json()).then(data => {\n        if (data.token) {\n          this.setState({\n            user: data.user\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state.user);\n    let destinationsId = this.state.destinations.map(destination => destination.id);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-window\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(HeaderContainer, {\n      error: this.state.error,\n      createNewUser: this.createNewUser,\n      loginUser: this.loginUser,\n      historyProps: this.props,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"header-separation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(HomeContainer, {\n        clearSearch: this.clearSearch,\n        destinations: this.filterSearch(),\n        search: this.state.search,\n        updateSearchForm: this.updateSearchForm,\n        routerProps: this.props,\n        user: this.state.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 48\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: localStorage.token ? routerProps => /*#__PURE__*/React.createElement(ProfileContainer, {\n        routerProps: routerProps,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 86\n        }\n      }) : routerProps => /*#__PURE__*/React.createElement(NotFound, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 152\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/:id\",\n      render: routerProps => /*#__PURE__*/React.createElement(ShowContainer, {\n        user: this.state.user,\n        routerProps: routerProps,\n        destinationsId: destinationsId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 56\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/saimarahman/Desktop/Development/TravelAdvisor/src/App.js"],"names":["React","Component","withRouter","Route","Switch","HomeContainer","ProfileContainer","ShowContainer","HeaderContainer","Footer","NotFound","App","state","user","destinations","search","error","createNewUser","newUser","console","log","setState","token","loginUser","fetch","method","headers","body","JSON","stringify","then","r","json","userData","localStorage","setItem","updateSearchForm","newValue","prevState","filterSearch","newArr","filter","destination","searchValue","toLowerCase","name","includes","trip_type","clearSearch","emptyValue","componentDidMount","data","render","destinationsId","map","id","props","routerProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport './App.css';\nimport { Route, Switch } from 'react-router'\nimport HomeContainer from './HomeComponents/HomeContainer'\nimport ProfileContainer from './ProfileComponents/ProfileContainer'\nimport ShowContainer from './DestinationComponents/ShowContainer'\nimport HeaderContainer from './HeaderContainer.jsx'\nimport Footer from './Footer'\nimport NotFound from './NotFound';\n\nclass App extends Component {\n\n  state={\n    user: {},\n    destinations:[],\n    search: \"\",\n    error: \"\"\n  }\n\n  componentDidMount() {\n    fetch(`https://traveladvisor-api.herokuapp.com/destinations`)\n    .then(r => r.json())\n    .then((destinations) => {\n      this.setState({\n        destinations\n      })\n    })\n\n    if(localStorage.token){\n      fetch(`https://traveladvisor-api.herokuapp.com/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      })\n      .then(r => r.json())\n      .then((data) => {\n        if(data.token){\n          this.setState({\n              user: data.user\n            })\n          }\n        })\n      }\n  }\n\n  createNewUser = (newUser) => {\nconsole.log(newUser)\n    this.setState({\n      user: newUser.user,\n      token: newUser.token\n    })\n  }\n\n  loginUser = (user) => {\n    fetch('https://traveladvisor-api.herokuapp.com/login', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n    .then(r => r.json())\n    .then(userData => {\n      if(userData.error){\n        this.setState({\n          error: userData.error\n        })\n      }else{\n        localStorage.setItem(\"token\", userData.token)\n        this.setState({\n          user: userData.user,\n          search: \"\"\n        })\n      }\n    })\n\n\n\n\n  }\n\n  updateSearchForm = (newValue) => {\n    this.setState(prevState => {\n      return {\n        search: newValue\n      }\n    })\n  }\n\n  filterSearch = () => {\n    let newArr = this.state.destinations.filter( destination => {\n      let searchValue = this.state.search.toLowerCase()\n      return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue)\n    })\n    return newArr\n  }\n\n  clearSearch = (emptyValue) => {\n    this.setState({\n      search: emptyValue\n    })\n  }\n\n  render() {\n     console.log(this.state.user);\n    let destinationsId = this.state.destinations.map(destination => destination.id)\n\n    return (\n      <div className=\"page-window\">\n          <HeaderContainer error={this.state.error} createNewUser={this.createNewUser} loginUser={this.loginUser} historyProps={this.props} />\n          <hr className=\"header-separation\"/>\n\n        <Switch>\n          <Route exact path='/' render={ () => <HomeContainer\n          clearSearch={this.clearSearch}\n          destinations={this.filterSearch()}\n          search={this.state.search}\n          updateSearchForm={this.updateSearchForm}\n          routerProps={this.props}\n          user={this.state.user}\n          />} />\n          <Route exact path='/profile' render={localStorage.token ? (routerProps) => <ProfileContainer routerProps={routerProps} /> : (routerProps) => <NotFound />}/>\n          <Route path='/:id' render={ (routerProps) => <ShowContainer user={this.state.user} routerProps={routerProps} destinationsId={destinationsId} /> }/>\n        </Switch>\n\n        <Footer />\n      </div>\n    )\n  }\n\n}\n\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}