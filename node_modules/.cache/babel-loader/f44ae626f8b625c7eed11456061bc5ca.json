{"ast":null,"code":"var _jsxFileName = \"/Users/saimarahman/Desktop/SECoach/New-Travel-App/nextRoute-frontend/src/DestinationComponents/ShowContainer.jsx\";\nimport React, { Component, useEffect, useState } from 'react';\nimport CommentContainer from './CommentContainer';\nimport PhotoContainer from './PhotoContainer';\nimport ThingsToDoContainer from './ThingsToDoContainer';\nimport NotFound from '../NotFound';\nimport { Card, Header } from 'semantic-ui-react';\nimport { Divider, Form, Label } from 'semantic-ui-react';\n\nfunction ShowContainer(props) {\n  let [clicked, setClicked] = useState(false);\n  let [destination, setDestination] = useState({});\n  let [addJoiner, setAddJoiner] = useState([]);\n  let [reviews, setReviews] = useState([]);\n  useEffect(() => {\n    let destination_id = parseInt(props.routerProps.match.params.id);\n    fetch(`http://localhost:3000/destinations/${destination_id}`).then(r => r.json()).then(destination => {\n      setDestination(destination);\n      setReviews(destination.reviews);\n    });\n  }, []);\n\n  let createComment = (comment, rating) => {\n    console.log(newComment);\n    fetch('http://localhost:3000/reviews', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"accept\": \"application/json\",\n        \"Authorization\": `bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        destination_id: destination.id,\n        comment: comment,\n        rating: rating\n      })\n    }).then(r => r.json()).then(newReview => {\n      let reviewArr = [...reviews, newReview];\n      console.log(\"arr\", reviewArr);\n      setReviews(reviewArr);\n    });\n  }; // console.log(\"revies\",reviews);\n\n\n  let deleteReview = review_id => {\n    fetch(`http://localhost:3000/reviews/${review_id}`, {\n      method: \"DELETE\"\n    }).then(r => r.json()).then(deletedReview => {\n      let newReviewArr = reviews.filter(review => review.id !== deletedReview.review.id);\n      setReviews(newReviewArr);\n    });\n  };\n\n  let addToBucketList = notifyAdd => {\n    console.log(localStorage.token);\n    fetch(`http://localhost:3000/add_joiners`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"Authorization\": `bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        destination_id: destination.id\n      })\n    }).then(r => r.json()).then(add_joiner => {\n      // console.log(add_joiner);\n      setAddJoiner(add_joiner);\n      setClicked(prevState => !prevState);\n    });\n  }; // console.log(addJoiner);\n  // console.log(destination);\n\n\n  console.log(reviews);\n  let {\n    things_to_dos\n  } = destination;\n  let thingsToDo = !things_to_dos ? null : things_to_dos.map(thingstodo => /*#__PURE__*/React.createElement(ThingsToDoContainer, {\n    key: thingstodo.id,\n    thingstodo: thingstodo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 78\n    }\n  }));\n  let notifyAdd = clicked ? /*#__PURE__*/React.createElement(Label, {\n    pointing: \"right\",\n    className: \"notifyAdd\",\n    size: \"teal\",\n    basic: true,\n    color: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 32\n    }\n  }, \"Added to your bucketlist!\") : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, props.destinationsId.includes(parseInt(props.routerProps.match.params.id)) ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buckNotify\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, notifyAdd, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: addToBucketList,\n    className: \"add-to-bucketlist\",\n    hidden: localStorage.token ? false : true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"+ Add to bucketlist \")), /*#__PURE__*/React.createElement(PhotoContainer, {\n    destination: destination,\n    clicked: clicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    className: \"things-to-do-container-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, \"Things to Do\"), /*#__PURE__*/React.createElement(Card.Group, {\n    className: \"things-to-do-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, thingsToDo), /*#__PURE__*/React.createElement(CommentContainer, {\n    routerProps: props.routerProps,\n    deleteReview: deleteReview,\n    createComment: createComment,\n    reviews: reviews,\n    user: props.user,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NotFound, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 16\n    }\n  })));\n}\n\nexport default ShowContainer;","map":{"version":3,"sources":["/Users/saimarahman/Desktop/SECoach/New-Travel-App/nextRoute-frontend/src/DestinationComponents/ShowContainer.jsx"],"names":["React","Component","useEffect","useState","CommentContainer","PhotoContainer","ThingsToDoContainer","NotFound","Card","Header","Divider","Form","Label","ShowContainer","props","clicked","setClicked","destination","setDestination","addJoiner","setAddJoiner","reviews","setReviews","destination_id","parseInt","routerProps","match","params","id","fetch","then","r","json","createComment","comment","rating","console","log","newComment","method","headers","localStorage","token","body","JSON","stringify","newReview","reviewArr","deleteReview","review_id","deletedReview","newReviewArr","filter","review","addToBucketList","notifyAdd","add_joiner","prevState","things_to_dos","thingsToDo","map","thingstodo","destinationsId","includes","user"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport CommentContainer from './CommentContainer'\nimport PhotoContainer from './PhotoContainer'\nimport ThingsToDoContainer from './ThingsToDoContainer'\nimport NotFound from '../NotFound'\nimport { Card, Header } from 'semantic-ui-react'\nimport { Divider, Form, Label } from 'semantic-ui-react'\n\nfunction ShowContainer(props) {\n\n let [clicked, setClicked] = useState(false)\n let [destination, setDestination] = useState({})\n let [addJoiner, setAddJoiner] = useState([])\n let [reviews, setReviews] = useState([])\n\n useEffect(()=>{\n   let destination_id = parseInt(props.routerProps.match.params.id)\n   fetch(`http://localhost:3000/destinations/${destination_id}`)\n   .then(r => r.json())\n   .then(destination => {\n     setDestination(destination)\n     setReviews(destination.reviews)\n\n   })\n\n },[])\n\n\nlet createComment = (comment, rating) => {\nconsole.log(newComment);\n    fetch('http://localhost:3000/reviews', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"accept\": \"application/json\",\n        \"Authorization\": `bearer ${localStorage.token}`\n      },\n      body: JSON.stringify({\n        destination_id: destination.id,\n        comment: comment,\n        rating: rating\n      })\n    })\n    .then(r => r.json())\n    .then((newReview) => {\n      let reviewArr = [...reviews, newReview]\n       console.log(\"arr\", reviewArr);\n      setReviews(reviewArr)\n    })\n  }\n  // console.log(\"revies\",reviews);\n\n  let deleteReview = (review_id) => {\n    fetch(`http://localhost:3000/reviews/${review_id}`, {\n      method: \"DELETE\"\n    })\n    .then(r => r.json())\n    .then(deletedReview => {\n      let newReviewArr = reviews.filter(review => review.id !== deletedReview.review.id)\n      setReviews(newReviewArr)\n    })\n  }\n\n\n\n  let addToBucketList = (notifyAdd) => {\n    console.log(localStorage.token);\n      fetch(`http://localhost:3000/add_joiners`, {\n        method: \"POST\",\n\n        headers: {\n          \"content-type\": \"application/json\",\n          \"Authorization\": `bearer ${localStorage.token}`\n        },\n\n        body: JSON.stringify({\n          destination_id: destination.id\n        })\n      })\n      .then(r => r.json())\n      .then(add_joiner => {\n        // console.log(add_joiner);\n        setAddJoiner(add_joiner)\n        setClicked((prevState) => !prevState)\n      })\n  }\n\n// console.log(addJoiner);\n// console.log(destination);\nconsole.log(reviews);\n\n    let { things_to_dos } = destination\n    let thingsToDo = !things_to_dos ? null : things_to_dos.map(thingstodo => <ThingsToDoContainer key={thingstodo.id} thingstodo={thingstodo}/>)\n    let notifyAdd =  clicked ? <Label pointing =\"right\" className=\"notifyAdd\" size =\"teal\" basic color='black' >\n          Added to your bucketlist!\n        </Label> : null\n\n    return (\n      <div>\n        {props.destinationsId.includes(parseInt(props.routerProps.match.params.id)) ?\n          <div>\n            <div className=\"buckNotify\">\n          {notifyAdd}\n          <div onClick={addToBucketList} className=\"add-to-bucketlist\" hidden={localStorage.token ? false : true}>+ Add to bucketlist </div>\n            </div>\n        <PhotoContainer destination={destination} clicked={clicked}/>\n            <Header className=\"things-to-do-container-header\">Things to Do</Header>\n            <Card.Group className=\"things-to-do-container\">{thingsToDo}</Card.Group>\n            <CommentContainer\n              routerProps={props.routerProps}\n              deleteReview={deleteReview}\n              createComment={createComment}\n              reviews={reviews}\n              user={props.user} />\n          </div>\n          :\n          <div><NotFound/></div>\n        }\n\n      </div>\n    );\n\n}\n\nexport default ShowContainer;\n"]},"metadata":{},"sourceType":"module"}