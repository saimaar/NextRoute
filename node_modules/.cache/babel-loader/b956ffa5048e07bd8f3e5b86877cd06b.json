{"ast":null,"code":"var _jsxFileName = \"/Users/saimarahman/Desktop/Development/TravelAdvisor/src/App.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './App.css';\nimport { Route, Switch } from 'react-router';\nimport HomeContainer from './HomeComponents/HomeContainer';\nimport ProfileContainer from './ProfileComponents/ProfileContainer';\nimport ShowContainer from './DestinationComponents/ShowContainer';\nimport HeaderContainer from './HeaderContainer.jsx';\nimport Footer from './Footer';\nimport NotFound from './NotFound';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      destinations: [],\n      search: \"\",\n      error: \"\"\n    };\n\n    this.createNewUser = newUser => {\n      this.setState({\n        user: newUser.user,\n        token: newUser.token\n      });\n    };\n\n    this.loginUser = user => {\n      fetch('https://travel-advisor-api.herokuapp.com/login', {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(r => r.json()).then(userData => {\n        if (userData.error) {\n          this.setState({\n            error: userData.error\n          });\n        } else {\n          localStorage.setItem(\"token\", userData.token);\n          this.setState({\n            user: userData.user,\n            search: \"\"\n          });\n        }\n      });\n    };\n\n    this.updateSearchForm = newValue => {\n      this.setState(prevState => {\n        return {\n          search: newValue\n        };\n      });\n    };\n\n    this.filterSearch = () => {\n      let newArr = this.state.destinations.filter(destination => {\n        let searchValue = this.state.search.toLowerCase();\n        return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue);\n      });\n      return newArr;\n    };\n\n    this.clearSearch = emptyValue => {\n      this.setState({\n        search: emptyValue\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:4000/destinations`).then(r => r.json()).then(destinations => {\n      this.setState({\n        destinations\n      });\n    });\n\n    if (localStorage.token) {\n      fetch(`http://localhost:4000/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      }).then(r => r.json()).then(data => {\n        if (data.token) {\n          this.setState({\n            user: data.user\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    // console.log(this.state.user);\n    let destinationsId = this.state.destinations.map(destination => destination.id);\n    return React.createElement(\"div\", {\n      className: \"page-window\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(HeaderContainer, {\n      error: this.state.error,\n      createNewUser: this.createNewUser,\n      loginUser: this.loginUser,\n      historyProps: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      className: \"header-separation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(HomeContainer, {\n        clearSearch: this.clearSearch,\n        destinations: this.filterSearch(),\n        search: this.state.search,\n        updateSearchForm: this.updateSearchForm,\n        routerProps: this.props,\n        user: this.state.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/profile\",\n      render: localStorage.token ? routerProps => React.createElement(ProfileContainer, {\n        routerProps: routerProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }) : routerProps => React.createElement(NotFound, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/:id\",\n      render: routerProps => React.createElement(ShowContainer, {\n        user: this.state.user,\n        routerProps: routerProps,\n        destinationsId: destinationsId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/saimarahman/Desktop/Development/TravelAdvisor/src/App.js"],"names":["React","Component","withRouter","Route","Switch","HomeContainer","ProfileContainer","ShowContainer","HeaderContainer","Footer","NotFound","App","state","user","destinations","search","error","createNewUser","newUser","setState","token","loginUser","fetch","method","headers","body","JSON","stringify","then","r","json","userData","localStorage","setItem","updateSearchForm","newValue","prevState","filterSearch","newArr","filter","destination","searchValue","toLowerCase","name","includes","trip_type","clearSearch","emptyValue","componentDidMount","data","render","destinationsId","map","id","props","routerProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport './App.css';\nimport { Route, Switch } from 'react-router'\nimport HomeContainer from './HomeComponents/HomeContainer'\nimport ProfileContainer from './ProfileComponents/ProfileContainer'\nimport ShowContainer from './DestinationComponents/ShowContainer'\nimport HeaderContainer from './HeaderContainer.jsx'\nimport Footer from './Footer'\nimport NotFound from './NotFound';\n\nclass App extends Component {\n\n  state={\n    user: {},\n    destinations:[],\n    search: \"\",\n    error: \"\"\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:4000/destinations`)\n    .then(r => r.json())\n    .then((destinations) => {\n      this.setState({\n        destinations\n      })\n    })\n\n    if(localStorage.token){\n      fetch(`http://localhost:4000/persist`, {\n        headers: {\n          \"Authorization\": `bearer ${localStorage.token}`\n        }\n      })\n      .then(r => r.json())\n      .then((data) => {\n        if(data.token){\n          this.setState({\n              user: data.user\n            })\n          }\n        })\n      }\n  }\n\n  createNewUser = (newUser) => {\n    this.setState({\n      user: newUser.user,\n      token: newUser.token\n    })\n  }\n\n  loginUser = (user) => {\n    fetch('https://travel-advisor-api.herokuapp.com/login', {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    })\n    .then(r => r.json())\n    .then(userData => {\n      if(userData.error){\n        this.setState({\n          error: userData.error\n        })\n      }else{\n        localStorage.setItem(\"token\", userData.token)\n        this.setState({\n          user: userData.user,\n          search: \"\"\n        })\n      }\n    })\n\n\n\n  }\n\n  updateSearchForm = (newValue) => {\n    this.setState(prevState => {\n      return {\n        search: newValue\n      }\n    })\n  }\n\n  filterSearch = () => {\n    let newArr = this.state.destinations.filter( destination => {\n      let searchValue = this.state.search.toLowerCase()\n      return destination.name.toLowerCase().includes(searchValue) || destination.trip_type.toLowerCase().includes(searchValue)\n    })\n    return newArr\n  }\n\n  clearSearch = (emptyValue) => {\n    this.setState({\n      search: emptyValue\n    })\n  }\n\n  render() {\n    // console.log(this.state.user);\n    let destinationsId = this.state.destinations.map(destination => destination.id)\n\n    return (\n      <div className=\"page-window\">\n          <HeaderContainer error={this.state.error} createNewUser={this.createNewUser} loginUser={this.loginUser} historyProps={this.props} />\n          <hr className=\"header-separation\"/>\n\n        <Switch>\n          <Route exact path='/' render={ () => <HomeContainer\n          clearSearch={this.clearSearch}\n          destinations={this.filterSearch()}\n          search={this.state.search}\n          updateSearchForm={this.updateSearchForm}\n          routerProps={this.props}\n          user={this.state.user}\n          />} />\n          <Route exact path='/profile' render={localStorage.token ? (routerProps) => <ProfileContainer routerProps={routerProps} /> : (routerProps) => <NotFound />}/>\n          <Route path='/:id' render={ (routerProps) => <ShowContainer user={this.state.user} routerProps={routerProps} destinationsId={destinationsId} /> }/>\n        </Switch>\n\n        <Footer />\n      </div>\n    )\n  }\n\n}\n\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}